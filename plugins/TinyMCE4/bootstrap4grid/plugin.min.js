/*
 *	tiny-bs-grid https://github.com/jeffhehe/tiny-bs-grid
 *  this works for TinyMCE4.* on Bootstrap 4.*
 *  Version: v0.4
 *  Author: Jeff Wang
 *  Date: Jan 20, 2023
 */
tinymce.PluginManager.add("bootstrap4grid",function e(t,a){t.contentCSS.push(a+"/bootstrapgrid-style.css"),t.addButton("bootstrap4grid",{type:"button",text:"BS4 Grid",tooltip:"Bootstrap4 Grid System",stateSelector:"div.row",cmd:"tinymce_bs4_grid"}),t.addCommand("tinymce_bs4_grid",function(){var e="Insert Bootstrap4 Grids",a=["12"],l="-md",s=jQuery(t.selection.getNode()).parents("div.row"),o=s.length>0;if(o){var n=jQuery(s[0]).children("div"),d=n.length,r=[];if(d>0)for(i=0,a=[];i<d;i++){var p=jQuery(n[i]).attr("class").split(/\s+/),v=jQuery(n[i]).html();for(r.push(v),j=0;j<p.length;j++)if(/^col-.*/i.test(p[j])){0==j&&(l=p[0].indexOf("col-xl")>-1?"-xl":p[0].indexOf("col-lg")>-1?"-lg":p[0].indexOf("col-md")>-1?"-md":p[0].indexOf("col-sm")>-1?"-sm":"");var u=p[j].lastIndexOf("-"),c=p[j].substr(u+1);a.push(c)}}e="Update Bootstrap4 Grids"}var m=[{type:"listbox",name:"size",label:"Target Screen",values:[{text:"X Large >= 1200px",value:"-xl"},{text:"Large >= 992px",value:"-lg"},{text:"Medium >= 768px",value:"-md"},{text:"Small >= 576px",value:"-sm"},{text:"X Small < 576px",value:""},],value:l},{type:"listbox",name:"grid",label:"Grid",values:[{text:"1 Column",value:"12"},{text:"2 Columns (1:1)",value:"6,6"},{text:"2 Columns (2:1)",value:"8,4"},{text:"2 Columns (3:1)",value:"9,3"},{text:"2 Columns (1:2)",value:"4,8"},{text:"2 Columns (1:3)",value:"3,9"},{text:"3 Columns (1:1:1)",value:"4,4,4"},{text:"3 Columns (2:1:1)",value:"6,3,3"},{text:"3 Columns (1:2:1)",value:"3,6,3"},{text:"3 Columns (1:1:2)",value:"3,3,6"},{text:"4 Columns (1:1:1:1)",value:"3,3,3,3"},],value:a.toString()},{type:"checkbox",name:"leadingBreak",label:"Add a Leading Line Break"},];o&&m.push({type:"checkbox",name:"removeGrids",label:"Remove Bootstrap Grids",onchange:function(e){var t=this.parent().prev(),a=t.prev(),l=a.prev();!0==this.state.data.checked?(t.hide(),a.hide(),l.hide()):(t.show(),a.show(),l.show())}}),t.windowManager.open({title:e,width:450,height:150,body:m,onsubmit:function(e){var a="",l="",n="<p>&nbsp;</p>";if(!0==e.data.leadingBreak&&(a="<p>&nbsp;</p>"),!0==e.data.removeGrids&&o){l=r.join("<p>&nbsp;</p>"),jQuery(s).replaceWith(a+l+n);return}(function(t){let a=t.length;if(o){if(d>0&&d<a){for(var s=0;s<d;s++)l+='<div class="col'+e.data.size+"-"+t[s]+'">'+r.shift()+"</div>";for(var p=d;p<a;p++)l+='<div class="col'+e.data.size+"-"+t[p]+'"><p>&nbsp;</p></div>'}else if(d>=a){for(var s=0;s<a;s++)l+='<div class="col'+e.data.size+"-"+t[s]+'">'+r.shift()+"</div>";d>a&&(n="<p>&nbsp;</p>"+r.join("<p>&nbsp;</p>")+"<p>&nbsp;</p>")}}else for(var v=0;v<a;v++)l+='<div class="col'+e.data.size+"-"+t[v]+'"><p>&nbsp;</p></div>'})(e.data.grid.split(",")),o?jQuery(s).replaceWith(a+'<div class="row">'+l+"</div>"+n):t.insertContent(a+'<div class="row">'+l+"</div>"+n)}})})});